"Tilt functions for generating Kubernetes YAML with Bazel."

load("../../core.tilt", "watch_files")
load("./queries.tilt", "bazel_build_files", "bazel_source_files")

def bazel_k8s_yaml(target):
    "Uses Bazel to generate the Kubernetes YAML of the given target."
    watch_files(bazel_build_files(target))
    watch_files(bazel_source_files(target))
    k8s_yaml(local("bazel run %s" % target))
